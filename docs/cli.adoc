= CLI
include::attributes.adoc[]

== Introducción

Amiga Java Launcher ofrece una interfaz de línea de comandos que permite ejecutar una serie de instrucciones.
En los siguientes apartados se explican cada una de estas instrucciones.

== Comandos

La sintaxis de ejecución de los comandos es la siguiente:

[Source,bash]
----
amglauncher [run-options] <archivo-ijlp | arhivo-jnlp>
amglauncher [control-options]
----

en dónde las opciones **[run-options]** disponibles son:

`-debug`:: Activar la salida de log con más detalle.
`-verbose`:: Activar la salida de log con el nivel de detalle más elevado.
Esta opción muestra mucha más información en el log.
`-fileoutput`:: Activar la salida a fichero del log de la aplicación de negocio en la carpeta de logs de amglauncher.
Opcionalmente se puede indicar la ruta absoluta a un fichero concreto.
`-offline <true|false>`:: Permitir la ejecución de la aplicación instalada en caché si no hay conexión con el servidor.
`-Pproperty=value`:: Pasar un argumento a la clase principal de la aplicación de negocio.
`-J<opción>`:: Proporcionar una opción a la JVM (argumentos de VM, propiedades de sistema, etc).
En caso de indicar propiedades de sistema, sólo se admitirán aquellas que sean "seguras"
(`-J-Dijlp.*`, `-J-Djnlp.*` ó `-J-Djavaws.*`). Por ej: `-J-Dijlp.myProp="myValue"`.
`-devmode`:: Permitir a los usuarios con los permisos adecuados omitir la comprobación de seguridad y/o utilizar protocolos no seguros como file ó http.

y las opciones *[control-options]* son:

`-help`:: Mostrar un diálogo de ayuda de la herramienta.
`-version`:: Mostrar en una ventana la versión del programa.
`-viewer`:: Mostrar el <<viewer,visor>> de aplicaciones instaladas.
`-install <archivo-ijlp | arhivo-jnlp>`:: Instalar la aplicación desde el descriptor especificado.
`-silent`:: Usado en conjunción con -install, activa la instalación silenciosa en segundo plano.
`-uninstall`:: Eliminar **todas** las aplicaciones de la caché.
`-uninstall <archivo-ijlp | arhivo-jnlp>`:: Eliminar la aplicación de la caché para el archivo especificado.


**Propiedades del sistema.**

Amiga Java Launcher dispone de una serie de propiedades de sistema para ciertas funcionalidades:

* Autenticación básica. Para aquellos usuarios que no están en la red de Inditex, estas dos propiedades permiten
establecer las credenciales para que el lanzador pueda utilizar los servicios mediante autenticación básica.

 -Damglauncher.auth.user=username
 -Damglauncher.auth.pass=password

* Internationalization. Esta propiedad permite establecer el idioma del lanzador.

 -Damglauncher.locale="es"

* Connection. Propiedades sobre las conexiones

 -Damglauncher.urlconnection.timeout.connect
Establece el tiempo de timeout para las conexiones url en ms. Por defecto 30000 ms (30s).

 -Damglauncher.urlconnection.timeout.read
Establece el tiempo de lectura para las conexiones url en ms. Por defecto 40000 ms (40s).

* Compatibilidad con dispositivos HDPI. Por defecto el lanzador ejecutará las aplicaciones de negocio en dispositivos de alta definición (HDPI)
delegando el escalado de la aplicación en el sistema operativo. En caso de querer delegar la responsabilidad del escalado
en la aplicación de negocio, hay que utilizar la propiedad:

 -Damglauncher.dpiaware="true"


[[viewer]]
=== Visor de aplicaciones

El visor de aplicaciones es una herramienta de utilidad que te permite comprobar las aplicaciones instaladas en el equipo.
El aspecto del visor de aplicaciones es:

image:viewer.png[viewer,title="Visor de aplicaciones"]

Como se puede ver en la imagen la pestaña `Aplicaciones` muestra una tabla con un registro por cada aplicación instalada.
Para cada aplicación la información mostrada es: su identificador (appId), el entorno de instalación, su slot
(en caso de no tenerlo será *default*), la versión de la aplicación, el tamaño que ocupa en disco, la versión de máquina virtual
que se ha definido en el archivo descriptor y la versión de la máquina virtual con la que se está ejecutando del catálogo
que ofrece el lanzador. Además se muestra un icono que permite identificar el archivo descriptor (.ijlp ó .jnlp) con el
que se ha instalado la aplicación.

En la parte superior de la tabla, se sitúa la botonera con las siguientes acciones:

[horizontal]
image:file_code.png[file_code,title="ijlp"] :: Mostrar el contenido del archivo descriptor.
image:link.png[link,title="link"] :: Copiar el enlace de descarga del archivo descriptor.
image:run.png[run,title="run"] :: Ejecutar la aplicación seleccionada.
image:icon_eliminar.png[uninstall,title="uninstall"] :: Desinstala la aplicación seleccionada.
image:filter.png[filter,title="filter"] :: Muestra el panel de filtros para acotar los resultados de la tabla de aplicaciones.

En la pestaña `Catálogo JRE` se muestran todas las máquinas virtuales de java disponibles en el catálogo del lanzador.

image:viewer2.png[viewer,title="Visor de máquinas virtuales de java"]

Por cada registro de la tabla se muestra la versión de la máquina virtual de java, su revisión y el directorio en el que se encuentra instalada.

[[devmode]]
=== Modo de desarrollo _devmode_

==== ¿Para qué sirve?

Amiga Java Launcher ofrece un modo de funcionamiento llamado `devmode` que se activa con el parámetro `devmode` en la ejecución del launcher, y permite al desarrollador:

- El lanzamiento de aplicaciones desde servidores sin seguridad (protocolo `http://`) e incluso desde directorios locales (protocolo `file://`).

- El lanzamiento de aplicaciones que estén firmadas con el certificado de desarrollo disponible a
través de la herramienta de `javalauncher-maven-plugin` con el uso de la propiedad `devMode`.

Más información en <<devmode.adoc#, DevMode>>
